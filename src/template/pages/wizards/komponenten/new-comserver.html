<aside>
    <p>Assetmanagement</p>
    <i>›</i>
    <p>Komponenten</p>
    <i>›</i>
    <p>Neuer Kommunikationsserver</p>
</aside>

<form id="newCommServerForm">
    <!-- Basis Informationen -->
    <div class="form-section">
        <div class="section-title">
            <span>Basis-Informationen</span>
            <span class="section-badge">Pflicht</span>
            <span class="section-counter">0/3</span>
            <span class="section-toggle-icon">▼</span>
        </div>
        <div class="section-content">
            <div class="form-group">
                <label>
                    Name des Kommunikationsservers <span class="required">*</span>
                    <span class="help-icon" data-tooltip="commserver-name">?</span>
                </label>
                <input type="text" id="name" name="name" required placeholder="z.B. HL7 Interface Engine, Mirth Connect Prod">
                <div class="help-text">Eindeutiger Name zur Identifikation des Servers</div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>
                        Typ / Produkt <span class="required">*</span>
                        <span class="help-icon" data-tooltip="commserver-type">?</span>
                    </label>
                    <div class="custom-select" data-name="type">
                        <div class="select-trigger">
                            <span class="placeholder">Bitte wählen</span>
                            <span class="arrow">▼</span>
                        </div>
                        <div class="select-dropdown">
                            <div class="select-options">
                                <div class="select-option" data-value="">Bitte wählen</div>
                                <div class="select-option" data-value="mirth">Mirth Connect / NextGen Connect</div>
                                <div class="select-option" data-value="rhapsody">Rhapsody Integration Engine</div>
                                <div class="select-option" data-value="ensemble">InterSystems Ensemble/HealthConnect</div>
                                <div class="select-option" data-value="cloverleaf">Infor Cloverleaf</div>
                                <div class="select-option" data-value="interfaceware">Interfaceware Iguana</div>
                                <div class="select-option" data-value="corepoint">Corepoint Integration Engine</div>
                                <div class="select-option" data-value="qvera">Qvera Interface Engine</div>
                                <div class="select-option" data-value="custom">Eigenentwicklung</div>
                                <div class="select-option" data-value="other">Sonstiges</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>
                        Hersteller
                        <span class="help-icon" data-tooltip="commserver-vendor">?</span>
                    </label>
                    <input type="text" id="vendor" name="vendor" placeholder="z.B. NextGen Healthcare, InterSystems">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>
                        Version <span class="required">*</span>
                        <span class="help-icon" data-tooltip="commserver-version">?</span>
                    </label>
                    <input type="text" id="version" name="version" required placeholder="z.B. 4.4.0, 2024.1">
                </div>
                <div class="form-group">
                    <label>
                        Kritikalität
                        <span class="help-icon" data-tooltip="commserver-criticality">?</span>
                    </label>
                    <div class="custom-select" data-name="criticality">
                        <div class="select-trigger">
                            <span class="placeholder">Bitte wählen</span>
                            <span class="arrow">▼</span>
                        </div>
                        <div class="select-dropdown">
                            <div class="select-options">
                                <div class="select-option" data-value="">Bitte wählen</div>
                                <div class="select-option" data-value="critical">Kritisch (24/7)</div>
                                <div class="select-option" data-value="high">Hoch</div>
                                <div class="select-option" data-value="medium">Mittel</div>
                                <div class="select-option" data-value="low">Niedrig</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Technische Konfiguration -->
    <div class="form-section collapsed">
        <div class="section-title">
            <span>Technische Konfiguration</span>
            <span class="section-counter">0/5</span>
            <span class="section-toggle-icon">▼</span>
        </div>
        <div class="section-content">
            <div class="form-row">
                <div class="form-group">
                    <label>
                        Kommunikations-Server / Hostname
                        <span class="help-icon" data-tooltip="commserver-id">?</span>
                    </label>
                    <div class="custom-select" data-name="serverid" data-component-type="vm,hardware">
                        <div class="select-trigger">
                            <span class="placeholder">Bitte wählen (VM/Hardware)</span>
                            <span class="arrow">▼</span>
                        </div>
                        <div class="select-dropdown">
                            <div class="select-options">
                                <div class="select-option" data-value="">Bitte wählen</div>
                                <div class="select-option" data-value="manual">Manuell eingeben</div>
                                <div class="select-group-header">Virtuelle Maschinen</div>
                                <!-- Dynamic VM entries -->
                                <div class="select-group-header">Hardware Server</div>
                                <!-- Dynamic Hardware entries -->
                            </div>
                        </div>
                    </div>
                    <div class="help-text">Wählen Sie den Server aus oder geben Sie manuell ein</div>
                </div>
                <div class="form-group" id="commserver-manual" style="display:none;">
                    <label>Server-Name (manuell)</label>
                    <input type="text" id="serverhostname" name="serverhostname" placeholder="z.B. comm-srv-01.example.com">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>IP-Adresse</label>
                    <input type="text" id="serverip" name="serverip" placeholder="z.B. 192.168.50.10">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>
                        Betriebssystem
                        <span class="help-icon" data-tooltip="commserver-os">?</span>
                    </label>
                    <div class="custom-select" data-name="serveroperatingystem">
                        <div class="select-trigger">
                            <span class="placeholder">Bitte wählen</span>
                            <span class="arrow">▼</span>
                        </div>
                        <div class="select-dropdown">
                            <div class="select-options">
                                <div class="select-option" data-value="">Bitte wählen</div>
                                <div class="select-option" data-value="windows">Windows Server</div>
                                <div class="select-option" data-value="linux">Linux</div>
                                <div class="select-option" data-value="unix">Unix</div>
                                <div class="select-option" data-value="docker">Docker Container</div>
                                <div class="select-option" data-value="kubernetes">Kubernetes</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>
                        Management-URL
                        <span class="help-icon" data-tooltip="commserver-management-url">?</span>
                    </label>
                    <input type="text" id="commservermanagementurl" name="commservermanagementurl" placeholder="z.B. https://comm-srv-01.example.com:8443">
                </div>
            </div>

            <div class="form-group">
                <label>
                    Umgebung
                    <span class="help-icon" data-tooltip="commserver-environment">?</span>
                </label>
                <div class="custom-select" data-name="environment">
                    <div class="select-trigger">
                        <span class="placeholder">Bitte wählen</span>
                        <span class="arrow">▼</span>
                    </div>
                    <div class="select-dropdown">
                        <div class="select-options">
                            <div class="select-option" data-value="">Bitte wählen</div>
                            <div class="select-option" data-value="production">Produktion</div>
                            <div class="select-option" data-value="staging">Test/Staging</div>
                            <div class="select-option" data-value="development">Entwicklung</div>
                            <div class="select-option" data-value="training">Schulung</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Protokolle & Standards -->
    <div class="form-section collapsed">
        <div class="section-title">
            <span>Unterstützte Protokolle & Standards</span>
            <span class="section-counter">0/1</span>
            <span class="section-toggle-icon">▼</span>
        </div>
        <div class="section-content">
            <label>
                Protokoll-Support
                <span class="help-icon" data-tooltip="commserver-protocols">?</span>
            </label>
            <div class="help-text">Wählen Sie die Protokolle und Standards, die dieser Server unterstützt</div>
            <div class="checkbox-group interface-data-types">
                <div class="checkbox-item">
                    <input type="checkbox" name="protocols" value="hl7v2">
                    <label>HL7 v2.x</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="protocols" value="fhir">
                    <label>HL7 FHIR</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="protocols" value="dicom">
                    <label>DICOM</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="protocols" value="xds">
                    <label>IHE XDS</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="protocols" value="rest">
                    <label>REST API</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="protocols" value="soap">
                    <label>SOAP/Web Services</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="protocols" value="mllp">
                    <label>MLLP</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="protocols" value="http">
                    <label>HTTP/HTTPS</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="protocols" value="tcp">
                    <label>TCP/IP</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="protocols" value="file">
                    <label>File-basiert</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="protocols" value="ftp">
                    <label>FTP/SFTP</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" name="protocols" value="mq">
                    <label>Message Queue</label>
                </div>
            </div>
        </div>
    </div>

    <!-- Hochverfügbarkeit -->
    <div class="form-section collapsed">
        <div class="section-title">
            <span>Hochverfügbarkeit & Performance</span>
            <span class="section-counter">0/1</span>
            <span class="section-toggle-icon">▼</span>
        </div>
        <div class="section-content">
            <div class="form-group">
                <label class="cluster-label">
                    <input type="checkbox" id="serverhighavailability" name="serverhighavailability" class="commserver-ha-check">
                    <span>Hochverfügbarkeits-Konfiguration (HA/Cluster)</span>
                    <span class="help-icon" data-tooltip="commserver-ha">?</span>
                </label>
            </div>

            <div class="commserver-ha-config" style="display: none;">
                <div class="form-row">
                    <div class="form-group">
                        <label>
                            Cluster-Typ
                            <span class="help-icon" data-tooltip="commserver-cluster-type">?</span>
                        </label>
                        <div class="custom-select" data-name="serverclustertype">
                            <div class="select-trigger">
                                <span class="placeholder">Bitte wählen</span>
                                <span class="arrow">▼</span>
                            </div>
                            <div class="select-dropdown">
                                <div class="select-options">
                                    <div class="select-option" data-value="">Bitte wählen</div>
                                    <div class="select-option" data-value="activeactive">Active-Active</div>
                                    <div class="select-option" data-value="activepassive">Active-Passive</div>
                                    <div class="select-option" data-value="loadbalanced">Load Balanced</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>
                            Anzahl Knoten
                            <span class="help-icon" data-tooltip="commserver-node-count">?</span>
                        </label>
                        <input type="number" id="servernodecount" name="servernodecount" placeholder="z.B. 2">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Monitoring & Logging -->
    <div class="form-section collapsed">
        <div class="section-title">
            <span>Monitoring & Logging</span>
            <span class="section-counter">0/3</span>
            <span class="section-toggle-icon">▼</span>
        </div>
        <div class="section-content">
            <div class="form-row">
                <div class="form-group">
                    <label>
                        Monitoring-Tool
                        <span class="help-icon" data-tooltip="commserver-monitoring">?</span>
                    </label>
                    <input type="text" id="monitoringtool" name="monitoringtool" placeholder="z.B. Nagios, Zabbix, eingebautes Dashboard">
                </div>
                <div class="form-group">
                    <label>
                        Log-Retention (Tage)
                        <span class="help-icon" data-tooltip="commserver-log-retention">?</span>
                    </label>
                    <input type="number" id="monitoringlogretention" name="monitoringlogretention" placeholder="z.B. 90">
                </div>
            </div>

            <div class="form-group">
                <label class="cluster-label">
                    <input type="checkbox" id="siemserverintegration" name="siemserverintegration" class="commserver-siem-check">
                    <span>SIEM-Integration aktiviert</span>
                    <span class="help-icon" data-tooltip="commserver-siem">?</span>
                </label>
                <div class="help-text">Werden Logs an ein zentrales SIEM-System gesendet?</div>
            </div>

            <div class="commserver-siem-config" style="display: none;">
                <div class="form-group">
                    <label>SIEM-System auswählen</label>
                    <div class="custom-select" data-name="siemserverid">
                        <div class="select-trigger">
                            <span class="placeholder">Bitte wählen</span>
                            <span class="arrow">▼</span>
                        </div>
                        <div class="select-dropdown">
                            <div class="select-options commserver-siem-list">
                                <div class="select-option" data-value="">Bitte wählen</div>
                                <!-- Will be populated dynamically from existing SIEM systems -->
                            </div>
                        </div>
                    </div>
                    <div class="help-text">Wählen Sie das SIEM-System, an das Logs gesendet werden</div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>
                            Log-Format
                            <span class="help-icon" data-tooltip="commserver-siem-log-format">?</span>
                        </label>
                        <div class="custom-select" data-name="siemlogformat">
                            <div class="select-trigger">
                                <span class="placeholder">Bitte wählen</span>
                                <span class="arrow">▼</span>
                            </div>
                            <div class="select-dropdown">
                                <div class="select-options">
                                    <div class="select-option" data-value="">Bitte wählen</div>
                                    <div class="select-option" data-value="syslog">Syslog</div>
                                    <div class="select-option" data-value="json">JSON</div>
                                    <div class="select-option" data-value="cef">CEF (Common Event Format)</div>
                                    <div class="select-option" data-value="leef">LEEF (Log Event Extended Format)</div>
                                    <div class="select-option" data-value="custom">Custom</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>
                            Transport-Protokoll
                            <span class="help-icon" data-tooltip="commserver-siem-transport">?</span>
                        </label>
                        <div class="custom-select" data-name="siemtransportprotocol">
                            <div class="select-trigger">
                                <span class="placeholder">Bitte wählen</span>
                                <span class="arrow">▼</span>
                            </div>
                            <div class="select-dropdown">
                                <div class="select-options">
                                    <div class="select-option" data-value="">Bitte wählen</div>
                                    <div class="select-option" data-value="tcp">TCP</div>
                                    <div class="select-option" data-value="udp">UDP</div>
                                    <div class="select-option" data-value="tls">TLS/SSL</div>
                                    <div class="select-option" data-value="https">HTTPS</div>
                                    <div class="select-option" data-value="beats">Elastic Beats</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        Log-Kategorien
                        <span class="help-icon" data-tooltip="commserver-siem-log-types">?</span>
                    </label>
                    <div class="help-text">Welche Log-Kategorien werden an das SIEM gesendet?</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" name="siemlogtypes" value="application">
                            <label>Application Logs</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="siemlogtypes" value="security">
                            <label>Security Events</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="siemlogtypes" value="access">
                            <label>Access Logs</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="siemlogtypes" value="error">
                            <label>Error Logs</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="siemlogtypes" value="audit">
                            <label>Audit Logs</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="siemlogtypes" value="performance">
                            <label>Performance Logs</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sicherheit -->
    <div class="form-section collapsed">
        <div class="section-title">
            <span>Sicherheit & Zugriff</span>
            <span class="section-counter">0/3</span>
            <span class="section-toggle-icon">▼</span>
        </div>
        <div class="section-content">
            <div class="form-row">
                <div class="form-group">
                    <label>
                        Authentifizierung
                        <span class="help-icon" data-tooltip="commserver-auth">?</span>
                    </label>
                    <div class="custom-select" data-name="serverauth">
                        <div class="select-trigger">
                            <span class="placeholder">Bitte wählen</span>
                            <span class="arrow">▼</span>
                        </div>
                        <div class="select-dropdown">
                            <div class="select-options">
                                <div class="select-option" data-value="">Bitte wählen</div>
                                <div class="select-option" data-value="ad">Active Directory</div>
                                <div class="select-option" data-value="ldap">LDAP</div>
                                <div class="select-option" data-value="local">Lokale Benutzer</div>
                                <div class="select-option" data-value="sso">Single Sign-On</div>
                                <div class="select-option" data-value="cert">Zertifikatsbasiert</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>
                        TLS/SSL für Admin-Zugriff
                        <span class="help-icon" data-tooltip="commserver-tls">?</span>
                    </label>
                    <div class="custom-select" data-name="servertls">
                        <div class="select-trigger">
                            <span class="placeholder">Bitte wählen</span>
                            <span class="arrow">▼</span>
                        </div>
                        <div class="select-dropdown">
                            <div class="select-options">
                                <div class="select-option" data-value="">Bitte wählen</div>
                                <div class="select-option" data-value="yes">Ja, TLS aktiviert</div>
                                <div class="select-option" data-value="no">Nein</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>
                    Zugriffsberechtigung
                    <span class="help-icon" data-tooltip="commserver-access">?</span>
                </label>
                <input type="text" id="serveraccesspermissions" name="serveraccesspermissions" placeholder="z.B. Interface-Team, IT-Operations">
                <div class="help-text">Welche Teams/Personen haben Zugriff auf den Server?</div>
            </div>
        </div>
    </div>

    <!-- Wartung & Support -->
    <div class="form-section collapsed">
        <div class="section-title">
            <span>Wartung & Support</span>
            <span class="section-counter">0/3</span>
            <span class="section-toggle-icon">▼</span>
        </div>
        <div class="section-content">
            <div class="form-row">
                <div class="form-group">
                    <label>
                        Wartungsfenster
                        <span class="help-icon" data-tooltip="commserver-maintenance">?</span>
                    </label>
                    <input type="text" id="servermaintenancewindow" name="servermaintenancewindow" placeholder="z.B. Sonntag 02:00-06:00 Uhr">
                </div>
                <div class="form-group">
                    <label>
                        Letztes Update
                        <span class="help-icon" data-tooltip="commserver-last-update">?</span>
                    </label>
                    <input type="text" id="serverlastupdated" name="serverlastupdated" placeholder="z.B. 15.01.2024">
                </div>
            </div>

            <div class="form-group">
                <label>
                    Support-Kontakt
                    <span class="help-icon" data-tooltip="commserver-support">?</span>
                </label>
                <input type="text" id="serversupportcontact" name="serversupportcontact" placeholder="z.B. interface-support@example.com">
            </div>

            <div class="form-group">
                <label>
                    Anmerkungen
                    <span class="help-icon" data-tooltip="commserver-notes">?</span>
                </label>
                <textarea id="notes" name="notes" rows="3" placeholder="z.B. Besonderheiten, geplante Upgrades, bekannte Probleme..."></textarea>
            </div>
        </div>
    </div>
</form>

<!-- Include help tooltips -->
{{include:pages/wizards/komponenten/help/commserver-help.html}}
